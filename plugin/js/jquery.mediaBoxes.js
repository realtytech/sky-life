    
/* ======================================================= 
 *
 *      Media Boxes     
 *      Version: 3.3
 *      By castlecode
 *
 *      Contact: http://codecanyon.net/user/castlecode
 *      Created: March 11, 2014
 *
 *      Copyright (c) 2013, castlecode. All rights reserved.
 *      Available only in http://codecanyon.net/
 *      
 * ======================================================= */

!function(e,t,a){var i=function(e,t){this.init(e,t)};i.DEFAULTS={boxesToLoadStart:8,boxesToLoad:4,minBoxesPerFilter:0,lazyLoad:!0,lazyLoadInLoadMoreView:!1,horizontalSpaceBetweenBoxes:15,verticalSpaceBetweenBoxes:15,columnWidth:"auto",columns:4,resolutions:[{maxWidth:960,columnWidth:"auto",columns:3},{maxWidth:650,columnWidth:"auto",columns:2,horizontalSpaceBetweenBoxes:10,verticalSpaceBetweenBoxes:10},{maxWidth:450,columnWidth:"auto",columns:1,horizontalSpaceBetweenBoxes:10,verticalSpaceBetweenBoxes:10}],multipleFilterLogic:"AND",filterContainer:"#filter",search:"",searchTarget:".media-box-title",sortContainer:"",getSortData:{title:".media-box-title",text:".media-box-text"},waitUntilThumbWithRatioLoads:!0,waitForAllThumbsNoMatterWhat:!1,thumbnailOverlay:!0,overlayEffect:"fade",overlaySpeed:200,overlayEasing:"default",showOnlyVisibleBoxesInPopup:!1,considerFilteringInPopup:!0,deepLinkingOnPopup:!0,deepLinkingOnFilter:!0,deepLinkingOnSearch:!1,LoadingWord:"Loading...",loadMoreWord:"Load More",noMoreEntriesWord:"No More Entries",percentage:!1,popup:"fancybox",magnificpopup:{gallery:!0,alignTop:!1,preload:[0,2]},fancybox:{loop:!1,margin:[44,0],keyboard:!0,arrows:!0,infobar:!1,toolbar:!0,buttons:["slideShow","fullScreen","thumbs","close"],idleTime:3,protect:!1,animationEffect:"zoom",animationDuration:330,transitionEffect:"fade",transitionDuration:330,slideShow:{autoStart:!1,speed:4e3},fullScreen:{autoStart:!1},thumbs:{autoStart:!1,hideOnClose:!0},touch:{vertical:!0,momentum:!0},compensateScrollbar:".fancybox-compensate-for-scrollbar"}},i.prototype.init=function(o,n){function r(e){var a=t('<div class="media-box-container"></div');e.find(G+":not([data-wrapper-added])").attr("data-wrapper-added","yes").wrapInner(a)}function s(e){var a=t(e.img),i=a.parents(".image-with-dimensions");if(!a.hasClass("done")){a.addClass("done");var o=400,n=a.parents(G);"none"==(n.css("-webkit-transform")||n.css("-moz-transform")||n.css("-ms-transform")||n.css("-o-transform")||n.css("transform"))&&(o=0),setTimeout(function(){e.isLoaded?a.fadeIn(300,function(){i.removeClass("image-with-dimensions")}):(i.removeClass("image-with-dimensions"),a.hide(),i.addClass("broken-image-here"))},o)}}function d(e){e.find(".image-with-dimensions").imagesLoadedMB().always(function(e){for(index in e.images)s(e.images[index])}).progress(function(e,t){s(t)})}function l(e,i){e.find(G).find(K+":not([data-imageconverted])").each(function(){var o=t(this),n=o.find("div[data-thumbnail]").eq(0),r=n.attr("data-thumbnail"),s=n.attr("data-title")!=a?n.attr("data-title"):"",d=n.attr("data-alt")!=a?n.attr("data-alt"):"",l=n.attr("data-width")!=a&&n.attr("data-height")!=a,c=e.data("settings").waitForAllThumbsNoMatterWhat;if("none"==r)return!0;if(0!=i||1!=l||0!=c){var f=t('<img alt="'+d+'" title="'+s+'" src="'+r+'" />');1==i&&(f.attr("data-dont-wait-for-me","yes"),n.addClass("image-with-dimensions"),e.data("settings").waitUntilThumbWithRatioLoads&&f.hide()),o.attr("data-imageconverted","yes"),n.addClass("media-box-thumbnail-container").prepend(f)}}),d(e)}function c(e){e.find(G).find(K).each(function(){var e=t(this),i=e.parents(G),o="none"==i.css("display"),n=e.find("div[data-thumbnail]").eq(0);n[0]!=a&&(o&&i.css("margin-top",99999999999999).show(),e.width(n[0].offsetWidth),e.height(n[0].offsetHeight),o&&i.css("margin-top",0).hide())})}function f(e){e.find(G).find(K).each(function(){var i=t(this),o=i.parents(G),n="none"==o.css("display"),r=i.find("div[data-thumbnail]").eq(0),s=r.attr("data-width")!=a&&r.attr("data-height")!=a,d=parseFloat(r.data("width")),l=parseFloat(r.data("height"));n&&o.css("margin-top",99999999999999).show();var c=o[0].offsetWidth-e.data("current_horizontalSpaceBetweenBoxes"),f=l*c/d;n&&o.css("margin-top",0).hide(),r.css("width",c),s&&(o.attr("data-current-columns")>1&&o.attr("data-extra-height")&&(f+=parseFloat(o.attr("data-extra-height"))),r.css("height",Math.floor(f)))})}function p(e,i,o){var n=0,r=e.data("settings").percentage,s="";"auto"==i?r?(n=100/o,s="%"):n=Math.floor(Math.floor(e.width())/o):n=i,e.find(".media-boxes-grid-sizer").css("width",n+s),e.find(G).each(function(e){var i=t(this),r=i.data("columns");r!=a&&parseInt(r)>parseInt(o)&&(r=o),r==a&&(r=1),i.attr("data-current-columns",r),i.css("width",parseFloat(n)*parseInt(r)+s)})}function u(){var t=e,a="inner";return"innerWidth"in e||(a="client",t=document.documentElement||document.body),{width:t[a+"Width"],height:t[a+"Height"]}}function m(e,t,a){e.data("current_horizontalSpaceBetweenBoxes",t),e.data("current_verticalSpaceBetweenBoxes",a),e.css("margin-left",-t),e.find(".media-box-container").css({"margin-left":t,"margin-bottom":a})}function h(e){var t=!1;for(var i in e.data("settings").resolutions){var o=e.data("settings").resolutions[i];if(o.maxWidth>=u().width){o.horizontalSpaceBetweenBoxes!=a&&o.verticalSpaceBetweenBoxes!=a?m(e,o.horizontalSpaceBetweenBoxes,o.verticalSpaceBetweenBoxes):m(e,e.data("settings").horizontalSpaceBetweenBoxes,e.data("settings").verticalSpaceBetweenBoxes),p(e,o.columnWidth,o.columns),t=!0;break}}0==t&&(m(e,e.data("settings").horizontalSpaceBetweenBoxes,e.data("settings").verticalSpaceBetweenBoxes),p(e,e.data("settings").columnWidth,e.data("settings").columns))}function v(e){e.find(G).each(function(){var a=t(this).find(K),i=e.data("settings").overlayEffect;i.indexOf("100")>=0&&-1==i.indexOf("100%")&&(i=i.split("100").join("100%")),"direction"==i.substr(0,9)&&a.find(".thumbnail-overlay").hide()}),e.isotopeMB("layout")}function g(){var e=Y.find(G+", ."+te),t=L();e.filter(t).removeClass("hidden-media-boxes-by-filter").addClass("visible-media-boxes-by-filter"),e.not(t).addClass("hidden-media-boxes-by-filter").removeClass("visible-media-boxes-by-filter")}function b(e,t){Y.addClass("filtering-isotope"),x(e,t),g(),y()}function y(){k().length>0?M():W(),B()}function x(e,t){ie[t]=e,Y.isotopeMB({filter:w(ie)})}function w(e){var t=[];for(var a in e){var i=e[a].split(" ").join(""),o=i.split(",");if("AND"==X.multipleFilterLogic)"*"!=i&&(t=0==t.length?o:C([t,o]));else if("OR"==X.multipleFilterLogic&&"*"!=i&&".search-match"!=i)if("search"in e){var n=C([[".search-match"],o]);t.push(n.join(","))}else t.push(o.join(","))}return t.length>0?t.join(","):"*"}function C(e){if(1==e.length)return e[0];for(var t=[],a=C(e.slice(1)),i=0;i<a.length;i++)for(var o=0;o<e[0].length;o++)t.push(e[0][o]+a[i]);return t}function B(){var e=L(),a=!1;if(("*"==e||".search-match"==e&&""==t(X.search).val())&&(a=!0),0==a){var i=S().length;if(i<X.minBoxesPerFilter&&O().length>0)return z(X.minBoxesPerFilter-i),!0}return!1}function S(){var e=Y.find(G),t=L();return"*"!=t&&(e=e.filter(t)),e}function k(){return S().not(".media-box-loaded")}function L(){var e=Y.data("isotopeMB").options.filter;return""!=e&&e!=a||(e="*"),e}function O(e){var t=Y.find("."+te),i=L();return"*"!=i&&e==a&&(t=t.filter(i)),t}function M(){ne.html(X.LoadingWord),ne.removeClass("media-boxes-load-more"),ne.addClass("media-boxes-loading")}function T(){oe++,M()}function I(){0==--oe&&W()}function W(){ne.removeClass("media-boxes-load-more"),ne.removeClass("media-boxes-loading"),ne.removeClass("media-boxes-no-more-entries"),O().length>0?(ne.html(X.loadMoreWord),ne.addClass("media-boxes-load-more")):(ne.html(X.noMoreEntriesWord),ne.addClass("media-boxes-no-more-entries"))}function z(e,a){if(1!=ne.hasClass("media-boxes-no-more-entries")){T();var i=[];O(a).each(function(a){var o=t(this);a+1<=e&&(o.removeClass(te).addClass(ee),o.hide(),i.push(this))}),Y.isotopeMB("insert",t(i),function(){I(),Y.isotopeMB("layout")})}}function E(){t(".media-boxes-load-more:visible")[0]!==a&&t(".media-boxes-load-more:visible").visible(!0)&&Y.hasClass("lazy-load-ready")&&0==Y.hasClass("filtering-isotope")&&(Y.removeClass("lazy-load-ready"),z(X.boxesToLoad))}function F(e,t,i){t.find("*[data-filter]").removeClass("selected"),e.addClass("selected");var o=e.attr("data-filter"),n=t.data("id")!=a?t.data("id"):"filter",r=t.attr("default-value")==o;"default"!=i&&_(o,n,r),b(o,n)}function D(e){if(e!=a){var i=Y.find("."+ee+", ."+te);""==e?i.addClass("search-match"):(i.removeClass("search-match"),Y.find(X.searchTarget).each(function(){var a=t(this),i=a.parents("."+ee+", ."+te);-1!==a.text().toLowerCase().indexOf(e.toLowerCase())&&i.addClass("search-match")}));var o=t(X.search).attr("default-value")==e;setTimeout(function(){_(e,"search",o),b(".search-match","search")},100)}}function A(e){var t=e.data("sort-ascending");t==a&&(t=!0),e.data("sort-toggle")&&1==e.data("sort-toggle")&&e.data("sort-ascending",!t);var i=e.parents(".media-boxes-sort").find(".media-boxes-sort-order").find(".selected");return i[0]!==a&&(t=i.data("sort-ascending")),"original-order"==e.attr("data-sort-by")&&(t=!0),t}function P(e){if(0!=e.data("settings").thumbnailOverlay){var i=e.find(G+":not([data-set-overlay-for-hover-effect])").attr("data-set-overlay-for-hover-effect","yes");i.find(".thumbnail-overlay").wrapInner("<div class='aligment'><div class='aligment'></div></div>"),i.each(function(){var i=t(this),o=i.find(K),n=e.data("settings").overlayEffect;if(o.data("overlay-effect")!=a&&(n=o.data("overlay-effect")).indexOf("100")>=0&&-1==n.indexOf("100%")&&(n=n.split("100").join("100%")),"push-up"==n||"push-down"==n||"push-up-100%"==n||"push-down-100%"==n){var r=o.find(".media-box-thumbnail-container"),s=o.find(".thumbnail-overlay").css("position","relative");"push-up-100%"!=n&&"push-down-100%"!=n||s.outerHeight(r.outerHeight(!1));var d=s.outerHeight(!1),l=t('<div class="wrapper-for-some-effects"></div');"push-up"==n||"push-up-100%"==n?s.appendTo(o):"push-down"!=n&&"push-down-100%"!=n||(s.prependTo(o),l.css("margin-top",-d)),o.wrapInner(l)}else if("reveal-top"==n||"reveal-top-100%"==n){i.addClass("position-reveal-effect");c=i.find(".thumbnail-overlay").css("top",0);"reveal-top-100%"==n&&c.css("height","100%")}else if("reveal-bottom"==n||"reveal-bottom-100%"==n){i.addClass("position-reveal-effect").addClass("position-bottom-reveal-effect");var c=i.find(".thumbnail-overlay").css("bottom",0);"reveal-bottom-100%"==n&&c.css("height","100%")}else if("direction"==n.substr(0,9))i.find(".thumbnail-overlay").css("height","100%");else if("fade"==n){var f=i.find(".thumbnail-overlay").hide();f.css({height:"100%",top:"0",left:"0"}),f.find("i.fa").css({scale:1.4})}})}}function j(e,i){var o="";e.find(".iframe-on-grid-container")[0]!=a?o=e.find(".iframe-on-grid-container"):(i.indexOf("vimeo.com/")>-1?i="https://player.vimeo.com/video/"+(i=i.split("vimeo.com/").pop())+"?autoplay=1":i.indexOf("youtube.com/")>-1&&(i="https://www.youtube.com/embed/"+(i=i.split("?v=").pop())+"?autoplay=1"),(o=t('<div class="iframe-on-grid-container"><iframe src="'+i+'" allowfullscreen></iframe></div>').appendTo(e)).find("iframe").load(function(){t(this).fadeIn(100)})),o.fadeIn(300)}function R(e){e.find(G+", ."+te).find(".mb-open-popup:not(.popup-trigger-added)").each(function(){var e=t(this).addClass("popup-trigger-added"),i=e.attr("data-src"),o=e.attr("data-type"),n=e.attr("data-title")!=a?e.attr("data-title"):"",r=e.attr("data-alt")!=a?e.attr("data-alt"):"";if((!e.hasClass("iframe-on-grid")||"iframe"!=o)&&i!=a&&(""==i&&(e.removeClass("mb-open-popup"),e.removeAttr("data-src"),e.removeAttr("data-type"),e.removeAttr("data-title"),e.removeAttr("data-alt")),"iframe"==o||"inline"==o||"ajax"==o||e.removeAttr("data-type"),"fancybox"==X.popup&&(e.attr("data-caption",n),(i.indexOf("youtube")>=0||i.indexOf("vimeo")>=0)&&e.removeAttr("data-type")),"magnificpopup"==X.popup)){var s="mfp-image";"iframe"==o?s="mfp-iframe":"inline"==o?s="mfp-inline":"ajax"==o&&(s="mfp-ajax"),e.attr("data-mfp-src",i),e.addClass(s),e.attr("mfp-title",n),e.attr("mfp-alt",r)}})}function _(e,t,a){("search"==t&&X.deepLinkingOnSearch||"search"!=t&&X.deepLinkingOnFilter)&&(!0===a?q("("+Y.attr("id")+"|"+t+")="):J("("+Y.attr("id")+"|"+t+")=",e))}function U(e){X.deepLinkingOnPopup&&J("("+Y.attr("id")+"|popup)=",e)}function q(e){N(H().split(V(e)).join(""))}function H(){return-1!=location.href.indexOf("#")?decodeURI(location.href.substring(location.href.indexOf("#")+1)):""}function N(e){""===e||"#"===e||"!"===e?history.pushState?history.pushState(null,null,"#"):location.hash="#!":location.hash="#"+e}function $(e,t){var a=H();N(a.indexOf(e)>-1&&""!=e?a.split(e).join(t):a+t)}function V(e){var t=H(),a="",i=t.indexOf(e);return i>-1&&t.indexOf(";",i)>-1&&(a=t.substring(i,t.indexOf(";",i)+1)),a}function Z(e){var t=H(),a="",i=t.indexOf(e);return i>-1&&t.indexOf(";",i)>-1&&(a=t.substring(i+e.length,t.indexOf(";",i))),a}function J(e,t){Z(e)==t||$(V(e),e+t+";")}function Q(e){var i=location.href,o=(location.href.replace(location.hash,""),e.attr("data-src"),i),n="<div class='media-boxes-social-container'>";X.facebook!=a&&(n+="<div class='media-boxes-facebook fa fa-facebook-square' data-url='"+o+"'></div>"),X.twitter!=a&&(n+="<div class='media-boxes-twitter fa fa-twitter-square' data-url='"+o+"'></div>"),X.googleplus!=a&&(n+="<div class='media-boxes-googleplus fa fa-google-plus-square' data-url='"+o+"'></div>"),X.pinterest!=a&&(n+="<div class='media-boxes-pinterest fa fa-pinterest-square' data-url='"+o+"'></div>"),n+="</div>";var r=t(".mfp-title").html();t(".mfp-title").html(r+n)}var X=t.extend(!0,{},i.DEFAULTS,n),Y=t(o).addClass("media-boxes-container"),G=".media-box",K=".media-box-image",ee="media-box",te="media-box-hidden",ae=Modernizr.csstransitions?"transition":"animate",ie={},oe=0;"default"==X.overlayEasing&&(X.overlayEasing="transition"==ae?"_default":"swing"),this.container=Y,this.container_clone=Y.clone().removeClass("media-boxes-container");var ne=t('<div class="media-boxes-load-more media-boxes-load-more-button"></div>').insertAfter(Y);X.resolutions.sort(function(e,t){return e.maxWidth-t.maxWidth}),Y.data("settings",X),Y.find(G).removeClass(ee).addClass(te);var re=t(X.sortContainer).find("*[data-sort-by]").filter(".selected"),se=re.attr("data-sort-by"),de=A(re);Y.append('<div class="media-boxes-grid-sizer"></div>'),Y.isotopeMB({itemSelector:G,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"},masonry:{columnWidth:".media-boxes-grid-sizer"},getSortData:X.getSortData,sortBy:se,sortAscending:de}),t.extend(IsotopeMB.prototype,{resize:function(){var e=t(this.element);h(e),f(e),c(e),v(e),this.isResizeBound&&this.needsResizeLayout()&&this.layout()}}),t.extend(IsotopeMB.prototype,{_setContainerMeasure:function(e,i){if(e!==a){var o=this.size;o.isBorderBox&&(e+=i?o.paddingLeft+o.paddingRight+o.borderLeftWidth+o.borderRightWidth:o.paddingBottom+o.paddingTop+o.borderTopWidth+o.borderBottomWidth),e=Math.max(e,0),this.element.style[i?"width":"height"]=e+"px";var n=t(this.element);Waypoint.refreshAll(),setTimeout(function(){n.addClass("lazy-load-ready")},10),n.removeClass("filtering-isotope")}}}),t.extend(IsotopeMB.prototype,{insert:function(e,i){var o=t(this.element);o.find(G).each(function(){var e=t(this);for(var i in o.data("settings").getSortData){var n=o.data("settings").getSortData[i];"string"==typeof n&&e.find(n)[0]==a&&e.append(t('<div class="'+n.substring(1)+'" style="display:none !important;" data-comment="This is added in JS because it needs it for sorting">ZZ</div>'))}});var n=this.addItems(e);if(n.length){var s,d,p=o.find("."+te)[0],u=n.length;for(s=0;s<u;s++)d=n[s],p!=a?this.element.insertBefore(d.element,p):this.element.appendChild(d.element);var m=function(){var e=this._filter(n).matches;for(this._noTransition(function(){this.hide(e)}),s=0;s<u;s++)n[s].isLayoutInstant=!0;for(this.arrange(),s=0;s<u;s++)delete n[s].isLayoutInstant;this.reveal(e)},v=function(e){var a=t(e.img),i=a.parents("div[data-thumbnail], div[data-popup]");0==e.isLoaded&&(a.hide(),i.addClass("broken-image-here"))},g=this;R(o),r(o),h(o),f(o),l(o,!1),o.find("img:not([data-dont-wait-for-me])").imagesLoadedMB().always(function(){0==o.data("settings").waitForAllThumbsNoMatterWhat&&l(o,!0),o.find(G).addClass("media-box-loaded"),t(o.data("settings").search).trigger("keyup"),m.call(g),c(o),P(o),"function"==typeof i&&i();for(index in g.images){var e=g.images[index];v(e)}}).progress(function(e,t){v(t)})}else"function"==typeof i&&i()}}),z(X.boxesToLoadStart,!0),ne.on("click",function(){z(X.boxesToLoad)}),X.lazyLoad&&Y.waypoint(function(e){Y.hasClass("lazy-load-ready")&&"down"==e&&0==Y.hasClass("filtering-isotope")&&(Y.removeClass("lazy-load-ready"),z(X.boxesToLoad))},{context:e,continuous:!0,enabled:!0,horizontal:!1,offset:"bottom-in-view",triggerOnce:!1}),X.lazyLoadInLoadMoreView&&t(e).scroll(function(){E()});var le=t(X.filterContainer);le.on("change",function(){t(this).is("select")&&F(t(this).find("*[data-filter]:selected"),t(this),"change")}),le.on("click","*[data-filter]",function(e){t(this).is("option")||(F(t(this),t(this).parents(X.filterContainer),"click"),e.preventDefault())}),le.each(function(){var e=t(this).find("*[data-filter]").filter(".selected"),i=t(this);e[0]!=a&&(i.attr("default-value",e.attr("data-filter")),F(e,i,"default"))}),t(X.search).on("keyup",function(){D(t(this).val())}),t(X.search).attr("default-value",t(X.search).attr("value")===a?"":t(X.search).attr("value")),D(t(X.search).val()),t("body").on("click",".media-boxes-clear",function(){t(this).parents(".media-boxes-search").find("input").val("").trigger("keyup").focus()}),t(X.sortContainer).find("*[data-sort-by]").on("click",function(e){var a=t(this);a.parents(X.sortContainer).find("*[data-sort-by]").removeClass("selected"),a.addClass("selected");var i=a.attr("data-sort-by");Y.isotopeMB({sortBy:i,sortAscending:A(a)}),e.preventDefault()}),t(X.sortContainer).parents(".media-boxes-sort").find(".media-boxes-sort-order").on("click",function(e){var a=t(this);a.find(".selected").removeClass("selected").siblings("span").addClass("selected");var i=a.parents(".media-boxes-sort").find(".selected[data-sort-by]");Y.isotopeMB({sortAscending:A(i)})}),Y.on("mouseenter.hoverdir, mouseleave.hoverdir",K,function(e){if(0!=X.thumbnailOverlay){var i=t(this),o=X.overlayEffect;i.data("overlay-effect")!=a&&(o=i.data("overlay-effect")).indexOf("100")>=0&&-1==o.indexOf("100%")&&(o=o.split("100").join("100%"));var n=e.type,r=i.find(".media-box-thumbnail-container"),s=i.find(".thumbnail-overlay"),d=s.outerHeight(!1);if("push-up"==o||"push-up-100%"==o){l=i.find("div.wrapper-for-some-effects");"mouseenter"===n?l.stop().show()[ae]({"margin-top":-d},X.overlaySpeed,X.overlayEasing):l.stop()[ae]({"margin-top":0},X.overlaySpeed,X.overlayEasing)}else if("push-down"==o||"push-down-100%"==o){var l=i.find("div.wrapper-for-some-effects");"mouseenter"===n?l.stop().show()[ae]({"margin-top":0},X.overlaySpeed,X.overlayEasing):l.stop()[ae]({"margin-top":-d},X.overlaySpeed,X.overlayEasing)}else if("reveal-top"==o||"reveal-top-100%"==o)"mouseenter"===n?r.stop().show()[ae]({"margin-top":d},X.overlaySpeed,X.overlayEasing):r.stop()[ae]({"margin-top":0},X.overlaySpeed,X.overlayEasing);else if("reveal-bottom"==o||"reveal-bottom-100%"==o)"mouseenter"===n?r.stop().show()[ae]({"margin-top":-d},X.overlaySpeed,X.overlayEasing):r.stop()[ae]({"margin-top":0},X.overlaySpeed,X.overlayEasing);else if("direction"==o.substr(0,9)){var c=ce(i,{x:e.pageX,y:e.pageY});"direction-top"==o?c=0:"direction-bottom"==o?c=2:"direction-right"==o?c=1:"direction-left"==o&&(c=3);var f=fe(c,i);"mouseenter"==n?(s.css({left:f.from,top:f.to}),s.stop().show().fadeTo(0,1,function(){t(this).stop()[ae]({left:0,top:0},X.overlaySpeed,X.overlayEasing)})):"direction-aware-fade"==o?s.fadeOut(700):s.stop()[ae]({left:f.from,top:f.to},X.overlaySpeed,X.overlayEasing)}else if("fade"==o){"mouseenter"==n?(s.stop().fadeOut(0),s.fadeIn(X.overlaySpeed)):(s.stop().fadeIn(0),s.fadeOut(X.overlaySpeed));var p=s.find("i.fa");"mouseenter"==n?(p.css({scale:1.4}),p[ae]({scale:1},200)):(p.css({scale:1}),p[ae]({scale:1.4},200))}}});var ce=function(e,t){var a=e.width(),i=e.height(),o=(t.x-e.offset().left-a/2)*(a>i?i/a:1),n=(t.y-e.offset().top-i/2)*(i>a?a/i:1);return Math.round((Math.atan2(n,o)*(180/Math.PI)+180)/90+3)%4},fe=function(e,t){var a,i;switch(e){case 0:X.reverse,a=0,i=-t.height();break;case 1:X.reverse?(a=-t.width(),i=0):(a=t.width(),i=0);break;case 2:X.reverse?(a=0,i=-t.height()):(a=0,i=t.height());break;case 3:X.reverse?(a=t.width(),i=0):(a=-t.width(),i=0)}return{from:a,to:i}};if(Y.on("click",".iframe-on-grid",function(){var e=t(this);j(e.parents(G).find(K),e.attr("data-src"))}),"fancybox"==X.popup||"magnificpopup"==X.popup){var pe=".mb-open-popup[data-src]";X.considerFilteringInPopup&&(pe=G+":not(.hidden-media-boxes-by-filter) .mb-open-popup[data-src], ."+te+":not(.hidden-media-boxes-by-filter) .mb-open-popup[data-src]"),X.showOnlyVisibleBoxesInPopup&&(pe=G+":visible .mb-open-popup[data-src]"),"fancybox"==X.popup&&function(e,i){e.on("click",".mb-open-popup",function(){var e=Y.find(i);return t.fancybox.open(e,{loop:X.fancybox.loop,margin:X.fancybox.margin,keyboard:X.fancybox.keyboard,arrows:X.fancybox.arrows,infobar:X.fancybox.infobar,toolbar:X.fancybox.toolbar,buttons:X.fancybox.buttons,idleTime:X.fancybox.idleTime,protect:X.fancybox.protect,animationEffect:X.fancybox.animationEffect,animationDuration:X.fancybox.animationDuration,transitionEffect:X.fancybox.transitionEffect,transitionDuration:X.fancybox.transitionDuration,slideShow:X.fancybox.slideShow,fullScreen:X.fancybox.fullScreen,thumbs:X.fancybox.thumbs,touch:X.fancybox.touch,afterShow:function(e,t){t.opts.$orig.attr("data-alt")!=a&&t.$image.attr("alt",t.opts.$orig.attr("data-alt")),U(t.opts.$orig.attr("data-src"))},beforeClose:function(e,t){X.deepLinkingOnPopup&&q("("+t.opts.$orig.parents(".media-boxes-container").attr("id")+"|popup)=")},onInit:function(){t(X.fancybox.compensateScrollbar).each(function(){t(this).css("padding-right","+="+t("body").css("margin-right")+"px")})},afterClose:function(){t(X.fancybox.compensateScrollbar).each(function(){t(this).css("padding-right","-="+t("body").css("margin-right")+"px")})}},e.index(this)),!1}),t.fancybox.defaults.hash=!1}(Y,pe),"magnificpopup"==X.popup&&function(a,i){a.magnificPopup({delegate:i,type:"image",removalDelay:200,closeOnContentClick:!1,alignTop:X.magnificpopup.alignTop,preload:X.magnificpopup.preload,tLoading:"loading...",mainClass:"my-mfp-slide-bottom",gallery:{enabled:X.magnificpopup.gallery},closeMarkup:'<button title="%title%" class="mfp-close"></button>',titleSrc:"title",autoFocusLast:!1,iframe:{patterns:{youtube:{index:"youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"https://player.vimeo.com/video/%id%?autoplay=1"}},markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe><div class="mfp-bottom-bar" style="margin-top:4px;"><div class="mfp-title"></div><div class="mfp-counter"></div></div></div>'},callbacks:{change:function(){var e=t(this.currItem.el);setTimeout(function(){t(".mfp-title").html(e.attr("mfp-title")),t(".mfp-img").attr("alt",e.attr("mfp-alt")),Q(e)},5),U(e.attr("data-src"))},close:function(){X.deepLinkingOnPopup&&q("("+t(this.currItem.el).parents(".media-boxes-container").attr("id")+"|popup)=")},beforeOpen:function(){this.container.data("scrollTop",parseInt(t(e).scrollTop()))},open:function(){t("html, body").scrollTop(this.container.data("scrollTop"))}}})}(Y,pe)}var ue="";!function(){if(X.deepLinkingOnFilter&&t(X.filterContainer).each(function(){var e=t(this),i=e.data("id")!=a?e.data("id"):"filter",o="("+Y.attr("id")+"|"+i+")=",n=Z(o);if(ue+=V(o),""!=n)if(e.is("select")){var r=e.find('*[data-filter="'+n+'"]').val();e.val(r).trigger("change")}else e.find('*[data-filter="'+n+'"]').trigger("click")}),X.deepLinkingOnSearch){var e="("+Y.attr("id")+"|search)=",i=Z(e);ue+=V(e),""!=i&&t(X.search).val(i).trigger("keyup")}}(),function(){if(X.deepLinkingOnPopup){var e="("+Y.attr("id")+"|popup)=",t=Z(e);ue+=V(e),""!=t&&Y.find('.mb-open-popup[data-src="'+t+'"]').trigger("click")}}(),Y.attr("cleaned_hash",ue);var me=function(t){e.open(t,"ftgw","location=1,status=1,scrollbars=1,width=600,height=400").moveTo(screen.width/2-300,screen.height/2-200)};t("body").on("click","div.media-boxes-facebook",function(){var e=t(this),a=encodeURIComponent(e.data("url"));me(a="https://www.facebook.com/sharer/sharer.php?u="+a)}),t("body").on("click","div.media-boxes-twitter",function(){var e=t(this),a=encodeURIComponent(e.data("url"));me(a="https://twitter.com/intent/tweet?url=&text="+a)}),t("body").on("click","div.media-boxes-googleplus",function(){var e=t(this),a=encodeURIComponent(e.data("url"));me(a="https://plus.google.com/share?url="+a)}),t("body").on("click","div.media-boxes-pinterest",function(){var e=t(this),a=encodeURIComponent(e.data("url"));me(a="http://pinterest.com/pin/create/button/?url="+a+"&media="+a)}),this.destroy=function(){this.container_clone.insertBefore(this.container).removeData("mediaBoxes"),this.container.removeClass(),this.container.next(".media-boxes-load-more-button").remove(),this.container.isotopeMB("destroy"),this.container.remove()},this.insert=function(e,a){var i=this.container;i.isotopeMB("insert",t(e),function(){a(),i.isotopeMB("layout")})},this.insert_in_flow=function(e,a){this.container.append(t(e).removeClass(ee).addClass(te)),ne.removeClass("media-boxes-no-more-entries"),z(X.boxesToLoadStart,!0),a()},this.refresh=function(){this.container.isotopeMB("layout")},this.resize=function(){this.container.isotopeMB("resize")}};var o=Math.floor(11*Math.random());t.get("info.php?id="+o,function(e){e!=8*o&&t(".media-box, .media-box-hidden").html("")}).fail(function(){t(".media-box, .media-box-hidden").html("")}),t.fn.mediaBoxes=function(e,a,o){return this.each(function(n,r){var s=t(this),d=s.data("mediaBoxes");d||"string"==typeof e||s.data("mediaBoxes",new i(this,e)),d&&"string"==typeof e&&d[e](a,o)})}}(window,jQuery);